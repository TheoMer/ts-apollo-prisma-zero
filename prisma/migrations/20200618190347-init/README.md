# Migration `20200618190347-init`

This migration has been generated by smallbee3 at 6/18/2020, 7:03:47 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "Gender" AS ENUM ('Male', 'Female');

CREATE TYPE "AuthType" AS ENUM ('Email', 'Facebook', 'Google', 'Apple');

CREATE TABLE "ts-apollo-prisma"."User" (
"birthDay" timestamp(3)   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"deletedAt" timestamp(3)   ,"email" text  NOT NULL ,"gender" "Gender"  ,"id" text  NOT NULL ,"name" text   ,"nickname" text   ,"password" text  NOT NULL ,"phone" text   ,"photoURL" text   ,"thumbURL" text   ,"updatedAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY ("id"))

CREATE TABLE "ts-apollo-prisma"."Profile" (
"authType" "AuthType" NOT NULL ,"id" text  NOT NULL ,"socialId" text  NOT NULL ,"userId" text  NOT NULL ,"verified" boolean  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "ts-apollo-prisma"."Post" (
"content" text   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"deletedAt" timestamp(3)   ,"id" SERIAL,"published" boolean  NOT NULL DEFAULT false,"title" text  NOT NULL ,"updatedAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"userId" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "User.email" ON "ts-apollo-prisma"."User"("email")

CREATE UNIQUE INDEX "Profile.userId" ON "ts-apollo-prisma"."Profile"("userId")

ALTER TABLE "ts-apollo-prisma"."Profile" ADD FOREIGN KEY ("userId")REFERENCES "ts-apollo-prisma"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "ts-apollo-prisma"."Post" ADD FOREIGN KEY ("userId")REFERENCES "ts-apollo-prisma"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200618190347-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,59 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+enum Gender {
+  Male
+  Female
+}
+
+enum AuthType {
+  Email
+  Facebook
+  Google
+  Apple
+}
+
+model User {
+  id          String      @default(cuid()) @id
+  email       String      @unique
+  password    String
+  name        String?
+  nickname    String?
+  thumbURL    String?
+  photoURL    String?
+  birthDay    DateTime?
+  gender      Gender?
+  phone       String?
+  createdAt   DateTime    @default(now())
+  updatedAt   DateTime    @default(now())
+  deletedAt   DateTime?
+  posts       Post[]
+  profile     Profile?
+}
+
+model Profile {
+  id          String      @default(cuid()) @id
+  socialId    String
+  authType    AuthType
+  verified    Boolean
+  userId      String      @unique
+  User        User        @relation(fields: [userId], references: [id])
+}
+
+model Post {
+  id          Int         @default(autoincrement()) @id
+  title       String
+  content     String?
+  published   Boolean     @default(false)
+  userId      String
+  user        User        @relation(fields: [userId], references: [id])
+  createdAt   DateTime    @default(now())
+  updatedAt   DateTime    @default(now())
+  deletedAt   DateTime?
+}
```


